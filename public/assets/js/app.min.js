/* @project        express
 * @author         
 * @version         0.0.0
 * @build          2020-09-09 15:43
 * @copyright      Copyright (c) 2020, 
 */"use strict";function asyncGeneratorStep(e,t,n,r,o,a,s){try{var c=e[a](s),l=c.value}catch(u){return void n(u)}c.done?t(l):Promise.resolve(l).then(r,o)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){function a(e){asyncGeneratorStep(c,r,o,a,s,"next",e)}function s(e){asyncGeneratorStep(c,r,o,a,s,"throw",e)}var c=e.apply(t,n);a(void 0)})}}function load_smoothly(){var e=document.querySelector(".Loading");e.classList.toggle("hide")}function all_request(e,t){return _all_request.apply(this,arguments)}function _all_request(){return _all_request=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return load_smoothly(),e.next=3,fetch("http://localhost:3000/api/album/".concat(t)).then(function(e){try{return e.json()}catch(t){return t}}).then(function(e){var t=document.querySelector("#album-img"),n=document.querySelector("#artist"),r=document.querySelector("#album-type"),o=document.querySelector("#album-name"),a=document.querySelector("#album-release"),s=document.querySelector("#result-request");return load_smoothly(),t.src=e.images[1].url,n.textContent=e.artists[0].name,r.textContent=e.album_type,o.textContent=e.name,a.textContent=e.release_date,s.classList.toggle("hide"),s.classList.contains("hide")&&s.classList.toggle("hide"),e.tracks.items}).then(function(e){var n=document.querySelector("#musicas"),r=document.querySelector("#songs");document.querySelector("#result-request");if(r.addEventListener("click",function(e){var t=e.target;n.classList.contains("hide")&&(t.style.transform="rotate(90deg)"),n.classList.contains("hide")||(t.style.transform="rotate(270deg)"),n.classList.toggle("hide")}),!n.classList.contains("hide")&&(t=!0)&&n.getElementsByTagName("li").length>3)for(;n.childNodes.length>3;)n.removeChild(n.lastChild);var o=0;e.forEach(function(e){var t=n.firstElementChild.cloneNode(!0);t.querySelector(".pos").textContent=++o,t.querySelector("#title").textContent=e.name,t.querySelector(".time").textContent=timing(e.duration_ms),n.appendChild(t)})})["catch"](function(e){setTimeout(function(){var e=document.querySelector("#album").value,t="NÃ£o foi possivel buscar o album pelo id : ",n=document.createTextNode(t),r=document.createElement("span"),o=document.querySelector("#msg");o.textContent||o.innerHTML?(o.textContent=t,r.append(e),o.append(r)):(o.appendChild(n),r.append(e),o.append(r))},500),console.log(e)});case 3:case"end":return e.stop()}},e)})),_all_request.apply(this,arguments)}function timing(e){e=1e3*Math.round(e/1e3);var t=new Date(e),n=t.getUTCMinutes()+":"+t.getUTCSeconds();return n}function tokenRequest(){return _tokenRequest.apply(this,arguments)}function _tokenRequest(){return _tokenRequest=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=credrentils(),n={method:"post",url:"https://accounts.spotify.com/api/token",headers:{Authorization:"Basic "+new Buffer(t.client_id+":"+t.client_secret).toString("base64")},data:querystring.stringify({grant_type:"client_credentials"})},e.prev=2,e.next=5,axios.request(n);case 5:r=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),console.log(e.t0);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}},e,null,[[2,8]])})),_tokenRequest.apply(this,arguments)}function trigger(e){swap(e.target.closest(".col._col-3.Card"))}function selectCurrentFixed(){return document.querySelector(".Suported .Card._main")}function getPosition(e){var t=e.getBoundingClientRect().x,n=e.getBoundingClientRect().y;return{x:t,y:n}}function swap(e){var t=getPosition(e),n=selectCurrentFixed(),r=getPosition(n),o=calc(r,t),a=leftNTop(e,n);doSwapMove(e,n,o,a)}function calc(e,t){var n=e.x-t.x,r=e.y-t.y;return{x:n,y:r}}function leftNTop(e,t){var n=e.style.left,r=e.style.top,o=t.style.left,a=t.style.top;return n=Number(n.replace("px","")),r=Number(r.replace("px","")),o=Number(o.replace("px","")),a=Number(a.replace("px","")),{target:{left:n,top:r},fixed:{left:o,top:a}}}function doSwapMove(e,t,n,r){r.target.left=Math.round(n.x+r.target.left),r.target.top=Math.round(n.y+r.target.top),r.fixed.left=Math.round(-1*n.x+r.fixed.left),r.fixed.top=Math.round(-1*n.y+r.fixed.top),e.style.setProperty("top",r.target.top+"px"),e.style.setProperty("left",r.target.left+"px"),e.classList.toggle("_main"),t.style.setProperty("top",r.fixed.top+"px"),t.style.setProperty("left",r.fixed.left+"px"),t.classList.toggle("_main")}try{var OLD_ALBUM_ID="",form=document.querySelector(".Form");form.addEventListener("submit",function(e){e.preventDefault();var t=form.querySelector("#album").value;0==t.length&&console.log("Tamanho 0"),OLD_ALBUM_ID!=t&&(console.log(t),all_request(t,OLD_ALBUM_ID)),OLD_ALBUM_ID==t&&console.log("Mesmo ID"),OLD_ALBUM_ID=t})}catch(e){}var cards=document.querySelectorAll(".Suported .Card");cards.forEach(function(e){e.addEventListener("click",trigger)});
//# sourceMappingURL=app.min.js.map
