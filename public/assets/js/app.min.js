/* @project        express
 * @author         
 * @version         0.0.0
 * @build          2020-09-12 10:03
 * @copyright      Copyright (c) 2020, 
 */"use strict";function asyncGeneratorStep(e,t,r,o,n,c,l){try{var a=e[c](l),s=a.value}catch(u){return void r(u)}a.done?t(s):Promise.resolve(s).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){function c(e){asyncGeneratorStep(a,o,n,c,l,"next",e)}function l(e){asyncGeneratorStep(a,o,n,c,l,"throw",e)}var a=e.apply(t,r);c(void 0)})}}function load_smoothly(){var e=document.querySelector(".Loading");e.classList.toggle("hide")}function all_request(e,t){return _all_request.apply(this,arguments)}function _all_request(){return _all_request=_asyncToGenerator(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return load_smoothly(),e.next=3,fetch("http://localhost:3000/api/album/".concat(t)).then(function(e){try{return e.json()}catch(t){return load_smoothly(),t}}).then(function(e){var t=document.querySelector("#album-img"),r=document.querySelector("#artist"),o=document.querySelector("#album-type"),n=document.querySelector("#album-name"),c=document.querySelector("#album-release"),l=document.querySelector("#result-request");return load_smoothly(),showSucces(),t.src=e.images[1].url,r.textContent=e.artists[0].name,o.textContent=e.album_type,n.textContent=e.name,c.textContent=e.release_date,l.classList.contains("hide")&&l.classList.toggle("hide"),e.tracks.items}).then(function(e){var t=document.querySelector("#musicas"),r=document.querySelector("#songs");r.addEventListener("click",showHideSongs),checkList(t),fillList(e)})["catch"](function(e){console.log(e);var r="Not was possible to find an album with ".concat(t);showError(r)});case 3:case"end":return e.stop()}},e)})),_all_request.apply(this,arguments)}function timing(e){e=1e3*Math.round(e/1e3);var t,r=new Date(e);return t=r.getUTCSeconds()<10?r.getUTCMinutes()+":0"+r.getUTCSeconds():r.getUTCMinutes()+":"+r.getUTCSeconds()}function checkList(e){if(e.childNodes.length>3)for(;e.childNodes.length>3;)e.removeChild(e.lastChild)}function fillList(e){var t=document.querySelector("#musicas"),r=0;e.forEach(function(e){var o=t.firstElementChild.cloneNode(!0);o.querySelector(".pos").textContent=++r,o.querySelector("#title").textContent=e.name,o.querySelector(".time").textContent=timing(e.duration_ms),t.appendChild(o)})}function showHideSongs(e){var t=document.querySelector("#musicas"),r=e.target;console.log(e),t.classList.contains("hide")?r.style.transform="rotate(90deg)":r.style.transform="rotate(270deg)",t.classList.toggle("hide")}function trigger(e){swap(e.target.closest(".col._col-3.Card"))}function selectCurrentFixed(){return document.querySelector(".Suported .Card._main")}function getPosition(e){var t=e.getBoundingClientRect().x,r=e.getBoundingClientRect().y;return{x:t,y:r}}function swap(e){var t=getPosition(e),r=selectCurrentFixed(),o=getPosition(r),n=calc(o,t),c=leftNTop(e,r);doSwapMove(e,r,n,c)}function calc(e,t){var r=e.x-t.x,o=e.y-t.y;return{x:r,y:o}}function leftNTop(e,t){var r=e.style.left,o=e.style.top,n=t.style.left,c=t.style.top;return r=Number(r.replace("px","")),o=Number(o.replace("px","")),n=Number(n.replace("px","")),c=Number(c.replace("px","")),{target:{left:r,top:o},fixed:{left:n,top:c}}}function doSwapMove(e,t,r,o){o.target.left=Math.round(r.x+o.target.left),o.target.top=Math.round(r.y+o.target.top),o.fixed.left=Math.round(-1*r.x+o.fixed.left),o.fixed.top=Math.round(-1*r.y+o.fixed.top),e.style.setProperty("top",o.target.top+"px"),e.style.setProperty("left",o.target.left+"px"),e.classList.toggle("_main"),t.style.setProperty("top",o.fixed.top+"px"),t.style.setProperty("left",o.fixed.left+"px"),t.classList.toggle("_main")}var showError=function(e){var t=document.querySelector(".input"),r=document.querySelector("#msg");t.style.borderColor="red",r.style.color="red",r.innerText=""+e},showSucces=function(){var e=document.querySelector(".input"),t=document.querySelector("#msg"),r="Success xD";e.style.borderColor="green",t.style.color="green",t.innerText=r};try{var form=document.querySelector(".Form"),OLD_ALBUM_ID="";form.addEventListener("submit",function(e){e.preventDefault();var t=form.querySelector("#album").value;t=t.replace(/\W/gi,""),console.log(t),verifyData(t,OLD_ALBUM_ID)&&all_request(t,OLD_ALBUM_ID),OLD_ALBUM_ID=t})}catch(e){console.log(e)}var verifyData=function(e,t){return 0!=e.length&&e!=t},cards=document.querySelectorAll(".Suported .Card");cards.forEach(function(e){e.addEventListener("click",trigger)});
//# sourceMappingURL=app.min.js.map
