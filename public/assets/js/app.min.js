/* @project        express
 * @author         
 * @version         0.0.0
 * @build          2020-10-02 11:36
 * @copyright      Copyright (c) 2020, 
 */!function(){function e(t,r,n){function o(i,s){if(!r[i]){if(!t[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[i]={exports:{}};t[i][0].call(l.exports,function(e){var r=t[i][1][e];return o(r||e)},l,l.exports,e,t,r,n)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}return e}()({1:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=function(){function e(t){n(this,e),this.form=t}return a(e,[{key:"init",value:function(){var e=this.form.querySelectorAll("input");e.forEach(function(e){e.addEventListener("focus",function(t){e.placeholder="";var r=t.target.previousElementSibling;r.classList.add("move")}),e.addEventListener("focusout",function(e){var t=e.target.previousElementSibling;""==e.target.value&&t.classList.contains("move")&&t.classList.toggle("move")})})}}]),e}();r["default"]=i},{}],2:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=function(){function e(t,r){n(this,e),this.target=document.querySelectorAll(t),this.fixed=this.selectCurrentFixed()}return a(e,[{key:"init",value:function(){var e=this;this.target.forEach(function(t){t.addEventListener("click",function(t){e.trigger(t)})})}},{key:"trigger",value:function(e){this.swap(e.target.closest(".col._col-3.Card"))}},{key:"selectCurrentFixed",value:function(){return document.querySelector(".Suported .Card._main")}},{key:"getPosition",value:function(e){var t=e.getBoundingClientRect().x,r=e.getBoundingClientRect().y;return{x:t,y:r}}},{key:"swap",value:function(e){var t=this.getPosition(e),r=this.selectCurrentFixed(),n=this.getPosition(r),o=this.calc(n,t),a=this.leftNTop(e,r);this.doSwapMove(e,r,o,a)}},{key:"calc",value:function(e,t){var r=e.x-t.x,n=e.y-t.y;return{x:r,y:n}}},{key:"leftNTop",value:function(e,t){var r=e.style.left,n=e.style.top,o=t.style.left,a=t.style.top;return r=Number(r.replace("px","")),n=Number(n.replace("px","")),o=Number(o.replace("px","")),a=Number(a.replace("px","")),{target:{left:r,top:n},fixed:{left:o,top:a}}}},{key:"doSwapMove",value:function(e,t,r,n){n.target.left=Math.round(r.x+n.target.left),n.target.top=Math.round(r.y+n.target.top),n.fixed.left=Math.round(-1*r.x+n.fixed.left),n.fixed.top=Math.round(-1*r.y+n.fixed.top),e.style.setProperty("top",n.target.top+"px"),e.style.setProperty("left",n.target.left+"px"),e.classList.toggle("_main"),t.style.setProperty("top",n.fixed.top+"px"),t.style.setProperty("left",n.fixed.left+"px"),t.classList.toggle("_main")}}]),e}();r["default"]=i},{}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.showHide=void 0;var n=function(){var e=document.querySelector("[data-target='showTracks']"),t=document.querySelector("[data-target='showRelated']");e.classList.toggle("_show"),t.classList.toggle("_show")};r.showHide=n,r["default"]=n},{}],4:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}var s=n(e("../animations/label.js")),c=function(){function e(t,r){o(this,e);try{this.form=t,this.settings=r,this.errorHandler(r),this.init(),this.labels=new s["default"](this.form).init()}catch(n){console.log(n)}}return i(e,[{key:"errorHandler",value:function(e){this.fields=Object.keys(e.fields),this.fields.forEach(function(e){try{var t=document.querySelector('label[for="'.concat(e,'"]')),r=document.querySelector("input[id=".concat(e,"]")),n=document.querySelector("#".concat(e));if(null==t||null==r||null==n)throw Error("Label for, input name and id not same")}catch(o){console.log(o)}}),this.inputValidators=[];var t=Object.keys(e.fields);for(var r in t)this.inputValidators.push([t[r]]),this.inputValidators[r].push(Object.entries(e.fields[t[r]]));try{console.log(this.inputValidators);var n=Object.getOwnPropertyNames(this.__proto__);this.inputValidators.forEach(function(e){e[1].forEach(function(e){if(!n.includes(e[0]))throw Error("Method ".concat(e," not defined"))})})}catch(o){console.log(o)}}},{key:"init",value:function(){var e=this,t=this.getAllInputs();t.forEach(function(t,r){var n=e.selectValidators(r);t.addEventListener("focusout",function(t){e.watchInput(t,n)})})}},{key:"validForm",value:function(){var e=this,t=this.getAllInputs(),r=[];return t.forEach(function(t,n){var o=e.selectValidators(n);r.push(e.verifyAllInputs(t,o))}),r.every(function(e){return 1==e})}},{key:"getData",value:function(){if(this.validForm()){var e=this.getAllInputs(),t={};return e.forEach(function(e){t[e.name]=e.value}),t}throw Error("Form is not valid")}},{key:"selectValidators",value:function(e){return this.inputValidators[e][1]}},{key:"watchInput",value:function(e,t){for(var r=0;r<t.length&&0!=this.__proto__["".concat(t[r][0])](e.target,t[r][1]);r++)r==t.length-1&&this.showSuccess(e)}},{key:"verifyAllInputs",value:function(e,t){for(var r=0;r<t.length;r++){if(0==this.__proto__["".concat(t[r][0])](e,t[r][1]))return!1;if(r==t.length-1)return!0}}},{key:"getAllInputs",value:function(){var e=this,t=[];return this.fields.forEach(function(r){t.push(e.form.querySelector("input[name=".concat(r,"]")))}),t}},{key:"showError",value:function(e,t){var r=document.createElement("small"),n=e,o=e.previousElementSibling;try{if(void 0==t.message)throw new Error("Message is not defined for this Validator");if(n.classList.contains("success")&&(n.classList.toggle("success"),o.classList.toggle("success")),e.classList.add("error"),o.classList.add("error"),r.innerText=t.message,null===e.nextElementSibling)return void e.after(r);e.nextElementSibling.innerText=t.message}catch(e){console.log(e)}}},{key:"showSuccess",value:function(e){var t=e.target,r=e.target.previousElementSibling;t.classList.contains("error")&&(t.classList.toggle("error"),r.classList.toggle("error")),null!=t.nextElementSibling&&(t.nextElementSibling.innerText=""),t.classList.add("success"),r.classList.add("success")}},{key:"notEmpty",value:function(e,t){var r=e.value;return 0!=r.length||(this.showError(e,t),!1)}},{key:"stringLength",value:function(e,t){var r=e.value;return!(r.length<t.min||r.length>t.max)||(this.showError(e,t),!1)}},{key:"inputBetween",value:function(e,t){var r=e.value;return!(r<t.min||r>t.max)||(this.showError(e,t),!1)}},{key:"regexp",value:function(e,t){var r=e.value;return!!new RegExp(t.regexp,"g").test(r)||(this.showError(e,t),!1)}}]),e}();t.exports=c},{"../animations/label.js":1}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.getArtistToptracks=r.getArtistAlbums=r.getArtistRelated=r.getArtist=void 0;var o=n(e("./searchArtist.js")),a=function(e){return fetch("http://localhost:3000/api/artist/".concat(e)).then(function(e){try{return e.ok?e.json():Promise.reject(e)}catch(t){return load_smoothly(),t}}).then(function(e){var t=document.querySelector("[data-target='overallResponse']"),r=t.querySelector("#artistType"),n=t.querySelector("#artistPhoto"),o=t.querySelector("#artistName"),a=t.querySelector("#artistFollowers"),i=t.querySelector("#artistPop"),s=t.querySelectorAll("#artistGenres li"),c=t.querySelectorAll("#progress div");return n.src=e.images[1].url,r.textContent=e.type.charAt(0).toUpperCase()+e.type.substring(1),o.textContent=e.name,a.textContent="".concat(e.followers.total," Followers"),i.textContent="Popularity: ".concat(e.popularity),function(){var t=Math.floor(Number(e.popularity));c.forEach(function(e){return e.classList.remove("fill")});for(var r=1;r<=t/10;r++)c[r-1].classList.add("fill")}(),u(s,e.genres),e})["catch"](function(e){return e})};r.getArtist=a;var i=function(e){return fetch("http://localhost:3000/api/artist/".concat(e,"/artist-related")).then(function(e){try{return e.ok?e.json():Promise.reject(e)}catch(t){return t}}).then(function(e){return f(e.artists),e})["catch"](function(e){return e})};r.getArtistRelated=i;var s=function(e){return fetch("http://localhost:3000/api/artist/".concat(e,"/artistalbum")).then(function(e){return e.ok?e.json():Promise.reject(e)}).then(function(e){return d(e.items),e})["catch"](function(e){return e})};r.getArtistAlbums=s;var c=function(e){return fetch("http://localhost:3000/api/artist/".concat(e,"/toptracks")).then(function(e){return e.ok?e.json():(console.log("hello"),Promise.reject(e))}).then(function(e){return l(e.tracks),e})["catch"](function(e){return e})};r.getArtistToptracks=c;var u=function(e,t){var r=e[0].cloneNode(!0),n=Array.from(e),o=e[0].parentNode;n.forEach(function(e){o.removeChild(e)}),t.forEach(function(e){var t=r.cloneNode(!0);t.textContent=e,o.appendChild(t)})},l=function(e){var t=document.querySelector("[data-target='toptracksResponse']"),r=t.querySelectorAll("#track"),n=r[0].cloneNode(!0),o=r[0].parentNode;r.forEach(function(e){o.removeChild(e)}),e.forEach(function(e){var t=n.cloneNode(!0),r=t.querySelector("#trackPhoto"),a=t.querySelector("#trackName"),i=t.querySelector("#trackDescription"),s=t.querySelector("#duration");r.src=e.album.images[1].url,a.textContent=e.name,i.textContent=e.album.name,s.textContent=h(e.duration_ms),o.appendChild(t)})},f=function(e){var t=document.querySelector("[data-target='toptracksResponse']"),r=t.querySelectorAll("#related"),n=r[0].cloneNode(!0),a=r[0].parentNode;r.forEach(function(e){a.removeChild(e)}),e.forEach(function(e){var t=n.cloneNode(!0),r=t.querySelector("#relatedPhoto"),i=t.querySelector("#relatedName");r.src=e.images[1].url,i.textContent=e.name,t.setAttribute("data-fetchid",e.id),t.addEventListener("click",function(e){var t=e.target.closest("#related").getAttributeNode("data-fetchid").value;(0,o["default"])(t)}),a.appendChild(t)})},d=function(e){var t=document.querySelector("[data-target='albunsResponse']"),r=t.querySelectorAll("#album"),n=r[0].cloneNode(!0),o=r[0].parentNode;r.forEach(function(e){o.removeChild(e)}),e.forEach(function(e){var t=n.cloneNode(!0),r=t.querySelector("#albumPhoto"),a=t.querySelector("#albumName"),i=t.querySelector("#albumQnty"),s=t.querySelector("#albumYear");r.src=e.images[0].url,a.textContent=e.name,i.textContent="".concat(e.total_tracks," Songs"),s.textContent=e.release_date.substring(0,4),o.appendChild(t)})},h=function(e){e=1e3*Math.round(e/1e3);var t,r=new Date(e);return t=r.getUTCSeconds()<10?r.getUTCMinutes()+":0"+r.getUTCSeconds():r.getUTCMinutes()+":"+r.getUTCSeconds()};r["default"]=a,r.getArtistRelated=i,r.getArtistAlbums=s,r.getArtistToptracks=c},{"./searchArtist.js":7}],6:[function(e,t,r){"use strict";function n(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise(function(o,a){function i(e){n(c,o,a,i,s,"next",e)}function s(e){n(c,o,a,i,s,"throw",e)}var c=e.apply(t,r);i(void 0)})}}function a(e,t){return i.apply(this,arguments)}function i(){return i=o(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(),e.next=3,fetch("http://localhost:3000/api/album/".concat(t)).then(function(e){try{return e.json()}catch(t){return s(),t}}).then(function(e){var t=document.querySelector("#album-img"),r=document.querySelector("#artist"),n=document.querySelector("#album-type"),o=document.querySelector("#album-name"),a=document.querySelector("#album-release"),i=document.querySelector("#result-request");return s(),t.src=e.images[1].url,r.textContent=e.artists[0].name,n.textContent=e.album_type,o.textContent=e.name,a.textContent=e.release_date,i.classList.contains("hide")&&i.classList.toggle("hide"),e.tracks.items}).then(function(e){var t=document.querySelector("#musicas"),r=document.querySelector("#songs");r.addEventListener("click",f),u(t),l(e)})["catch"](function(e){console.log(e);var r="Not was possible to find an album with ".concat(t);document.querySelector("small").innerText=r});case 3:case"end":return e.stop()}},e)})),i.apply(this,arguments)}function s(){var e=document.querySelector(".Loading");e.classList.toggle("hide")}function c(e){e=1e3*Math.round(e/1e3);var t,r=new Date(e);return t=r.getUTCSeconds()<10?r.getUTCMinutes()+":0"+r.getUTCSeconds():r.getUTCMinutes()+":"+r.getUTCSeconds()}function u(e){if(e.childNodes.length>3)for(;e.childNodes.length>3;)e.removeChild(e.lastChild)}function l(e){var t=document.querySelector("#musicas"),r=0;e.forEach(function(e){var n=t.firstElementChild.cloneNode(!0);n.querySelector(".pos").textContent=++r,n.querySelector("#title").textContent=e.name,n.querySelector(".time").textContent=c(e.duration_ms),t.appendChild(n)})}function f(e){var t=document.querySelector("#musicas"),r=e.target;console.log(e),t.classList.contains("hide")?r.style.transform="rotate(90deg)":r.style.transform="rotate(270deg)",t.classList.toggle("hide")}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=a,r.load_smoothly=s,r.timing=c,r.checkList=u,r.fillList=l,r.showHideSongs=f,r.showSucces=r.showError=void 0;var d=function(e){var t=document.querySelector(".input"),r=document.querySelector("small");t.style.borderColor="red",r.style.color="red",r.innerText=""+e};r.showError=d;var h=function(){var e=document.querySelector(".input"),t=document.querySelector("small"),r="Success xD";e.style.borderColor="green",t.style.color="green",t.innerText=r};r.showSucces=h},{}],7:[function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{"default":e};var t=o();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=e[i]}return r["default"]=e,t&&t.set(e,r),r}function i(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){function a(e){i(c,n,o,a,s,"next",e)}function s(e){i(c,n,o,a,s,"throw",e)}var c=e.apply(t,r);a(void 0)})}}function c(e,t){return u.apply(this,arguments)}function u(){return u=s(regeneratorRuntime.mark(function e(t,r){var n,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,d["default"])(t),o=(0,d.getArtistRelated)(t),a=(0,d.getArtistAlbums)(t),i=(0,d.getArtistToptracks)(t),l(),e.abrupt("return",Promise.allSettled([n,o,a,i]));case 6:case"end":return e.stop()}},e)})),u.apply(this,arguments)}function l(){var e=document.querySelector(".Loading");e.classList.toggle("hide")}function f(e){var t=document.querySelector("#musicas"),r=e.target;console.log(e),t.classList.contains("hide")?r.style.transform="rotate(90deg)":r.style.transform="rotate(270deg)",t.classList.toggle("hide")}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=c,r.load_smoothly=l,r.showHideSongs=f,r.showSucces=r.showError=void 0;var d=a(e("./artists")),h=function(e){var t=document.querySelector(".input"),r=document.querySelector("small");t.style.borderColor="red",r.style.color="red",r.innerText=""+e};r.showError=h;var m=function(){var e=document.querySelector(".input"),t=document.querySelector("small"),r="Success xD";e.style.borderColor="green",t.style.color="green",t.innerText=r};r.showSucces=m},{"./artists":5}],8:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=document.querySelector(".Loading");e.classList.toggle("hide")}function a(){var e=document.querySelector(".result");e.classList.contains("hide")&&e.classList.toggle("hide")}var i=n(e("./animations/toggle.js")),s=n(e("./animations/swap.js")),c=n(e("./functions/Submit.js")),u=n(e("./functions/searchAlbum.js")),l=n(e("./functions/searchArtist.js"));try{var f=new s["default"](".Suported .Card");f.init()}catch(d){console.log(d)}try{var h=document.querySelector("#album"),m=new c["default"](h,{fields:{album:{notEmpty:{message:"The album ID is required"},stringLength:{min:15,max:30,message:"The username must be more than 15 and less than 30 characters long"},regexp:{regexp:/^[a-zA-Z0-9]+$/,message:"The album ID can only consist of alphabetical and number"}}}}),y={};h.addEventListener("submit",function(e){e.preventDefault(),y=m.getData(),(0,u["default"])(y.album,"")})}catch(d){console.log(d)}try{var p=document.querySelector("#showR");p.addEventListener("click",i["default"]);var g=document.querySelector("#artist"),v=new c["default"](g,{fields:{artist:{notEmpty:{message:"The album ID is required"},stringLength:{min:15,max:30,message:"The username must be more than 15 and less than 30 characters long"},regexp:{regexp:/^[a-zA-Z0-9]+$/,message:"The album ID can only consist of alphabetical and number"}}}}),b={};g.addEventListener("submit",function(e){e.preventDefault(),b=v.getData(),(0,l["default"])(b.artist,"").then(function(e){return e=Array.from(e).every(function(e){return e.value instanceof Response}),console.log(e),e?Promise.reject(e):(x(),void o())})["catch"](function(e){var t="Was not possible to find yout album by ID: ";S(t),o(),console.log(e)})})}catch(d){console.log(d)}var S=function(e){var t=document.querySelector(".input"),r=document.querySelector("small");t.style.borderColor="red",r.style.color="red",r.innerText=""+e},x=function(){var e=document.querySelector(".input"),t=document.querySelector("small"),r="Success xD";a(),e.style.borderColor="green",t.style.color="green",t.innerText=r}},{"./animations/swap.js":2,"./animations/toggle.js":3,"./functions/Submit.js":4,"./functions/searchAlbum.js":6,"./functions/searchArtist.js":7}]},{},[8]);
//# sourceMappingURL=app.min.js.map
